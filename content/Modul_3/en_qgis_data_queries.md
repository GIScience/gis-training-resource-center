# Geodata Selection and Queries

Geodata selection and queries in QGIS allow a targeted selection of parts of geospatial datasets. This can be utilized for filtering and analyzing geospatial information, which are essential tasks when working with spatial data.
\
\
Three general types of selection/queries in QGIS that will cover the majority of your need include:\
**1. Manual Selection:** Selection by manually choosing features with one of various selection tools offered by QGIS. 

**2. Attribute based Selection:** Selection based on attribute values stored in the attribute table.

**3. Layer based spatial Selection:** Selecting features in one layer based on specified geometric relationships with features in another layer.

## Manual Selection
Manual selection is done mostly using one of the click based selection tools available under   in your project toolbar (alternative: `Edit` > `Select`). These include `Select Feature(s)`, `Select Feature by Polygon`, `Select Feature by Freehand` and `Select Feature by Radius`.
\
\
Example: `Select Feature(s)`

1.	Click `Select Feature(s)` in the drop down menu of ![](/fig/mActionSelectRectangle.png)
2.	Select features by clicking on the or drawing a rectangle overlapping them
3.	Use the tool outside of selectable features to end your selection

Tip: Holding down “Shift” during click based selction allows for selection of multiple features

:::{dropdown} Example: Manually select country polygons by click
:open:
<video width="100%" controls src="https://github.com/GIScience/gis-training-resource-center/raw/main/fig/en_qgis_select_features_by_click_wiki.mp4"></video>
:::

The other options of ![](/fig/mActionSelectRectangle.png) function in a similar way, selecting all features overlapping with the respective geometry generated by the tools.

:::{dropdown} Example: Manually select countrys by drawing a polygon
:open:
<video width="100%" controls src="https://github.com/GIScience/gis-training-resource-center/raw/main/fig/qgis_select_features_by_polygon.mp4"></video>
:::

Selected features are highlighted in bright yellow in the geospatial view and blue in the attribute table.

## Attribute Based Selection

A query based on specific Attributes can be done utilizing the `Select Features by Expression` tool available under ![](/fig/mActionSelectbyExpression.png) in the project toolbar and the attribute table (alternative: `Edit` > `Select` > `Select` Features by Expression).

1.	In the tool interface expand `Fields and Values` in the right hand panel
2.	Choose the field you want to base your selection on by double clicking it (it now should appear in the expression panel on the left hand side)
3.	Use a expression utilizing specific operators (see **WIKI**) to specify your selection in the left hand panel (e.g ""continent"  LIKE  'Asia'" to select all features with the value “Asia” in the field "continent" )

Tip: Click on `Show Values` in the top right corner when a field is selected to get a overview over the different values of the respective field by clicking `All Unique`/`10 Samples`. Double click values to use them in the expression panel on the left.

:::{dropdown} Example: Select all country polygons that share the value "Asia" in the field "continent"
:open:
<video width="100%" controls src="https://github.com/GIScience/gis-training-resource-center/raw/main/fig/en_qgis_select_by_expression_like_wiki.mp4"></video>
:::

## Layer Based Spatial Selection
Spatial selection of features allows to select parts of a layer based on their relationship with features in another geospatial layer (e.g. the selection of all point features in layer A that are located within a polygon feature in Layer B). It can be achieved by using the tool “Select by Location” available under ![](/fig/mActionSelectbyLocation.png) in the project toolbar or (alternative: `Vector` > `Research Tools` > `Select by Location`)

1.	In the tool interface select the vector choose the vector layer you want to select features from under “Select features from” and the layer you want to base the selection on under “By comparing to the features from”.
2.	Choose the geometric operator that will be utilized for the selection of features (see bottom paragraph)
3.	In the bottom promt choose how you want to procede with the newly selected features. The option include:
    1.	Creating a new selection
    2.	Adding to the current selection
    3.	Select within the current selection
    4.	Removing from the current selection

Selected features are again highlighted in bright yellow in. your geospatial interface.

:::{dropdown} Example: Select Cities (Point fatures) that intersect with the polygon "China"
:open:
<video width="100%" controls src="https://github.com/GIScience/gis-training-resource-center/raw/main/fig/en_qgis_select_by_location_intersect_wiki.mp4"></video>
:::

:::{dropdown} Example 2: Selct all country polygons that touch the polygon "China"
:open:
<video width="100%" controls src="https://github.com/GIScience/gis-training-resource-center/raw/main/fig/en_qgis_select_by_location_touch_wiki.mp4"></video>
:::

### Geometric Operators
 The geometric operators define the conditions of the relationship bewteen your source and target layer that the selection will be based on. There are eight total options:

**1. Intersect**\
Features from the target layer are selected if they intersect with any features in the source layer.\
**Example:** Selecting all roads that cross a polygon representing a national park.

**2. Contain**\
Features from the target layer are selected if they completely contain features in the source layer.\
**Example:** Selecting a country polygon that completely contains smaller polygons representing cities.

**3. Disjoint**\
Features are disjoint if they do not share any common point or area; they have no spatial intersection.\
**Example:** Selecting administrative districts that do not share any common boundary or area.

**4. Equal**\
Features are equal if their geometries are identical, meaning they have the same shape, size, and spatial orientation.\
**Example:** Selecting two line segments with the exact same set of coordinates.

**5. Touch**\
Features from the target layer are selected if they touch (share a boundary with) features in the source layer.\
**Example:** Selecting parks that touch a specific road.

**6. Overlap**\
Features from the target layer are selected if they share any common spac with features in the source layer.\
**Example:** Selecting land parcels that overlap with a proposed construction zone.

**7. Are within**\
Features from the target layer are selected if they are completely within features in the source layer.\
**Example:** Selecting building polygons that are entirely within a polygon representing a city boundary.

**8. Cross**\
Features from the target layer are selected if they cross (have a line segment that crosses) features in the source layer.\
**Example:** Selecting rivers that cross a road.

[def]: /fig/mActionSelectRectangle.png